
<!-- ===================
     CARD.HTML (Carte Digitale â€“ Desktop v16)
     =================== -->

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AstroFood â€“ Carte Digitale</title>
  <meta name="theme-color" content="#0f172a" />
  <style>
    :root{
      --bg: radial-gradient(1200px 600px at 20% -10%, #0f172a 0%, #020617 60%);
      --surface: rgba(15,23,42,.6);
      --surface-2: rgba(2,6,23,.65);
      --border: #1f2937;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --gold:#FBBF24;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    *,*:before,*:after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; display:flex; justify-content:center; align-items:flex-start}
    .wrap{width:100%; max-width:820px; margin:2rem 1rem}

    .card{background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}
    .head{display:flex; align-items:center; justify-content:space-between; padding:1rem 1.25rem; border-bottom:1px solid var(--border); background:linear-gradient(to bottom, rgba(2,6,23,.9), rgba(2,6,23,.6))}
    .sign{display:flex; align-items:center; gap:.8rem}
    .sign .ico{font-size:1.5rem}
    .sign h1{margin:0; font-size:1.15rem; letter-spacing:.3px; color:var(--gold)}
    .badges{display:flex; gap:.5rem; flex-wrap:wrap}
    .badge{font-size:.78rem; padding:.25rem .6rem; border:1px solid var(--border); border-radius:999px; color:var(--muted); background:var(--surface-2)}

    .body{padding:1.25rem}
    .grid{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:1rem}
    @media(max-width:860px){ .grid{grid-template-columns:1fr} }
    .section{border:1px dashed var(--border); border-radius:12px; padding:1rem; background:rgba(2,6,23,.45)}
    .section h3{margin:.2rem 0 .6rem; color:var(--gold)}

    .footer{display:flex; align-items:center; justify-content:space-between; padding:1rem 1.25rem; border-top:1px solid var(--border); background:rgba(2,6,23,.5)}
    .btn{padding:.65rem .9rem; border-radius:12px; border:1px solid var(--border); background:var(--surface-2); color:var(--text); cursor:pointer}
    .btn.primary{background:var(--gold); color:#111827; border:none; font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="head">
        <div class="sign">
          <div class="ico" id="sign-ico">â™ˆï¸Ž</div>
          <h1 id="title">Carte digitale</h1>
        </div>
        <div class="badges">
          <div class="badge" id="badge-sign">â€”</div>
          <div class="badge" id="badge-state">â€”</div>
          <div class="badge" id="badge-plan">â€”</div>
          <div class="badge" id="badge-lang">FR</div>
        </div>
      </div>

      <div class="body" id="body">
        <div class="section" id="single">
          <h3 id="single-title">Recette</h3>
          <div id="single-content">Chargementâ€¦</div>
        </div>
        <div class="grid" id="daily3" style="display:none">
          <div class="section">
            <h3 id="h-breakfast">Petitâ€‘dÃ©jeuner</h3>
            <div id="c-breakfast">â€”</div>
          </div>
          <div class="section">
            <h3 id="h-lunch">DÃ©jeuner</h3>
            <div id="c-lunch">â€”</div>
          </div>
          <div class="section">
            <h3 id="h-dinner">DÃ®ner</h3>
            <div id="c-dinner">â€”</div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div style="opacity:.8">Lien partageable prÃªt</div>
        <div>
          <button class="btn" id="refresh">RafraÃ®chir</button>
          <button class="btn" id="copy-url">Copier lâ€™URL</button>
          <a class="btn primary" id="open-self" href="#" target="_blank" rel="noopener">Ouvrir dans un onglet</a>
        </div>
      </div>
    </div>
  </div>

  <script>
  (() => {
    const params = new URLSearchParams(location.search);
    const lang = (params.get('lang') || 'fr').toLowerCase();
    const sign = (params.get('sign') || 'aries').toLowerCase();
    const state = (params.get('state') || 'detox').toLowerCase();
    const plan = (params.get('plan') || 'single').toLowerCase();

    // i18n minimal
    const T = {
      fr:{recipe:'Recette', plan:'Plan de repas', breakfast:'Petitâ€‘dÃ©jeuner', lunch:'DÃ©jeuner', dinner:'DÃ®ner', copied:'URL copiÃ©e âœ…'},
      en:{recipe:'Recipe', plan:'Meal plan', breakfast:'Breakfast', lunch:'Lunch', dinner:'Dinner', copied:'URL copied âœ…'},
      ar:{recipe:'ÙˆØµÙØ©', plan:'Ø®Ø·Ø© ÙˆØ¬Ø¨Ø§Øª', breakfast:'ÙØ·ÙˆØ±', lunch:'ØºØ¯Ø§Ø¡', dinner:'Ø¹Ø´Ø§Ø¡', copied:'ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ…'}
    };
    const ui = T[lang] || T.fr;

    document.documentElement.lang = lang;
    document.documentElement.dir = (lang==='ar')?'rtl':'ltr';

    // IcÃ´nes Zodiac simples
    const ICON = { aries:'â™ˆï¸Ž', taurus:'â™‰ï¸Ž', gemini:'â™Šï¸Ž', cancer:'â™‹ï¸Ž', leo:'â™Œï¸Ž', virgo:'â™ï¸Ž', libra:'â™Žï¸Ž', scorpio:'â™ï¸Ž', sagittarius:'â™ï¸Ž', capricorn:'â™‘ï¸Ž', aquarius:'â™’ï¸Ž', pisces:'â™“ï¸Ž' };

    // LibellÃ©s pour badges
    const SIGN_LABEL = { fr:{aries:'BÃ©lier',taurus:'Taureau',gemini:'GÃ©meaux',cancer:'Cancer',leo:'Lion',virgo:'Vierge',libra:'Balance',scorpio:'Scorpion',sagittarius:'Sagittaire',capricorn:'Capricorne',aquarius:'Verseau',pisces:'Poissons'},
                         en:{aries:'Aries',taurus:'Taurus',gemini:'Gemini',cancer:'Cancer',leo:'Leo',virgo:'Virgo',libra:'Libra',scorpio:'Scorpio',sagittarius:'Sagittarius',capricorn:'Capricorn',aquarius:'Aquarius',pisces:'Pisces'},
                         ar:{aries:'Ø§Ù„Ø­Ù…Ù„',taurus:'Ø§Ù„Ø«ÙˆØ±',gemini:'Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡',cancer:'Ø§Ù„Ø³Ø±Ø·Ø§Ù†',leo:'Ø§Ù„Ø£Ø³Ø¯',virgo:'Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡',libra:'Ø§Ù„Ù…ÙŠØ²Ø§Ù†',scorpio:'Ø§Ù„Ø¹Ù‚Ø±Ø¨',sagittarius:'Ø§Ù„Ù‚ÙˆØ³',capricorn:'Ø§Ù„Ø¬Ø¯ÙŠ',aquarius:'Ø§Ù„Ø¯Ù„Ùˆ',pisces:'Ø§Ù„Ø­ÙˆØª'} };

    // DÃ©mo locale â€“ recettes statiques simples selon le signe
    const DEMO = (key) => {
      const base = {
        single:`Shake dÃ©tox ${key} : citron â€“ gingembre â€“ menthe ðŸ‹ðŸŒ±`,
        breakfast:`Overnight oats ${key} â€“ miel & noix`,
        lunch:`Bowl ${key} â€“ quinoa, mangue, gingembre âœ¨`,
        dinner:`Filet de saumon ${key} â€“ citron & lÃ©gumes rÃ´tis ðŸŒ™`
      };
      return base;
    };

    // Remplissage UI
    document.getElementById('sign-ico').textContent = ICON[sign] || 'âœ¦';
    document.getElementById('title').textContent = (plan==='daily3') ? ui.plan : ui.recipe;
    document.getElementById('badge-sign').textContent = SIGN_LABEL[lang]?.[sign] || sign;
    document.getElementById('badge-state').textContent = state;
    document.getElementById('badge-plan').textContent = (plan==='daily3') ? '3Ã—' : '1Ã—';
    document.getElementById('badge-lang').textContent = lang.toUpperCase();

    document.getElementById('h-breakfast').textContent = ui.breakfast;
    document.getElementById('h-lunch').textContent = ui.lunch;
    document.getElementById('h-dinner').textContent = ui.dinner;
    document.getElementById('single-title').textContent = ui.recipe;

    const data = DEMO(sign);
    if (plan === 'daily3'){
      document.getElementById('single').style.display = 'none';
      document.getElementById('daily3').style.display = '';
      document.getElementById('c-breakfast').textContent = data.breakfast;
      document.getElementById('c-lunch').textContent = data.lunch;
      document.getElementById('c-dinner').textContent = data.dinner;
    } else {
      document.getElementById('single').style.display = '';
      document.getElementById('daily3').style.display = 'none';
      document.getElementById('single-content').textContent = data.single;
    }

    // Actions
    const urlStr = location.href;
    document.getElementById('open-self').href = urlStr;
    document.getElementById('copy-url').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(urlStr); alert(ui.copied); }catch(e){ alert('Copy failed'); }
    });
    document.getElementById('refresh').addEventListener('click', ()=> location.reload());
  })();
  </script>
</body>
</html>
